'use strict';
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
exports.parse = void 0;
// const punycode = require('punycode');
const nearley = require('nearley');
const grammar_1 = __importDefault(require("./grammar"));
grammar_1.default.ParserStart = 'Mailbox';
const grammar = nearley.Grammar.fromCompiled(grammar_1.default);
// <https://tools.ietf.org/html/rfc5321#section-4.1.2>
function parse(address) {
    const parser = new nearley.Parser(grammar);
    parser.feed(address);
    if (parser.results.length !== 1) {
        throw new Error("address parsing failed: ambiguous grammar");
    }
    return parser.results[0];
}
exports.parse = parse;
//# sourceMappingURL=index.js.map